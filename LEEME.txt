# âš½ Zona BotÃ­n

Tienda online de botines de fÃºtbol. Desarrollada con Next.js 14, Firebase y MercadoPago.

---

## ğŸŒ URLs del Proyecto

| Entorno | URL |
|---|---|
| Local | http://localhost:3000 |
| ProducciÃ³n | _(agregar URL de Vercel cuando estÃ© deployado)_ |
| Panel Admin | /admin |

---

## ğŸ› ï¸ Servicios Utilizados

### Firebase (Google)
> https://console.firebase.google.com â†’ Proyecto: **zona-botÃ­n**

| Servicio | Uso |
|---|---|
| Authentication | Login y registro de usuarios con email/contraseÃ±a |
| Firestore Database | Almacena productos, pedidos y usuarios |
| Storage | No habilitado â€” se usa Cloudinary en su lugar |

**Colecciones de Firestore:**
- `products` â€” catÃ¡logo de productos
- `orders` â€” pedidos realizados por los usuarios
- `users` â€” datos de perfil y envÃ­o de los clientes

---

### Cloudinary
> https://cloudinary.com â†’ Cloud: **dryv3qbrh**

| Servicio | Uso |
|---|---|
| Image Upload | Almacena las imÃ¡genes de los productos |
| Upload Preset | `zona-botin-products` (modo unsigned) |
| Carpeta | `zona-botin/products/` |

---

### Mercado Pago
> https://www.mercadopago.com.ar/developers

| Servicio | Uso |
|---|---|
| Checkout Pro | Procesamiento de pagos |
| Webhooks | Notificaciones automÃ¡ticas de pagos aprobados/rechazados |
| Back URLs | RedirecciÃ³n tras el pago (success / failure / pending) |

---

### Vercel
> https://vercel.com

| Servicio | Uso |
|---|---|
| Hosting | Deploy automÃ¡tico desde GitHub |
| Environment Variables | Variables de entorno de producciÃ³n |
| Serverless Functions | API routes de Next.js (create-preference, webhook) |

---

## ğŸ“„ PÃ¡ginas del Sitio

### PÃºblicas
| Ruta | DescripciÃ³n |
|---|---|
| `/` | Landing principal con hero, catÃ¡logo y filtros |
| `/login` | Inicio de sesiÃ³n |
| `/register` | Registro en 2 pasos |
| `/checkout/success` | Pago aprobado |
| `/checkout/failure` | Pago rechazado |
| `/checkout/pending` | Pago pendiente |

### Privadas (requieren login)
| Ruta | DescripciÃ³n |
|---|---|
| `/cart` | Carrito y formulario de checkout |

### Admin (solo cuenta admin)
| Ruta | DescripciÃ³n |
|---|---|
| `/admin` | Dashboard con estadÃ­sticas y pedidos recientes |
| `/admin/products` | CRUD de productos con carga de imÃ¡genes |
| `/admin/orders` | GestiÃ³n y seguimiento de pedidos |

### API Routes (internas)
| Ruta | DescripciÃ³n |
|---|---|
| `/api/create-preference` | Crea la preferencia de pago en MercadoPago |
| `/api/webhook` | Recibe notificaciones de pago de MercadoPago |

---

## ğŸ”‘ Variables de Entorno

Archivo: `.env.local` (local) â€” Panel de Vercel (producciÃ³n)

```env
# Firebase
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=

# Cloudinary
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=dryv3qbrh
NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET=zona-botin-products

# Mercado Pago
MP_ACCESS_TOKEN=

# General
NEXT_PUBLIC_BASE_URL=https://tu-dominio.vercel.app
NEXT_PUBLIC_ADMIN_EMAIL=zonabotin@gmail.com
```

---

## ğŸ‘¤ Cuenta Administrador

- **Email:** zonabotin@gmail.com
- **CÃ³mo acceder:** iniciar sesiÃ³n normalmente en `/login`
- **Panel:** `/admin`
- **Funciones:** cargar productos, ver pedidos, recibir notificaciones de ventas en tiempo real

---

## ğŸ—‚ï¸ Estructura del Proyecto

```
zona-botin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.js                  # Landing + catÃ¡logo
â”‚   â”‚   â”œâ”€â”€ login/page.jsx           # Login
â”‚   â”‚   â”œâ”€â”€ register/page.jsx        # Registro
â”‚   â”‚   â”œâ”€â”€ cart/page.jsx            # Checkout
â”‚   â”‚   â”œâ”€â”€ checkout/
â”‚   â”‚   â”‚   â”œâ”€â”€ success/page.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ failure/page.jsx
â”‚   â”‚   â”‚   â””â”€â”€ pending/page.jsx
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.jsx             # Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ products/page.jsx    # GestiÃ³n productos
â”‚   â”‚   â”‚   â””â”€â”€ orders/page.jsx      # GestiÃ³n pedidos
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ create-preference/   # API MercadoPago
â”‚   â”‚       â””â”€â”€ webhook/             # Webhook MercadoPago
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Navbar.jsx               # Barra de navegaciÃ³n + notificaciones
â”‚   â”‚   â”œâ”€â”€ CartDrawer.jsx           # Carrito lateral
â”‚   â”‚   â”œâ”€â”€ ProductCard.jsx          # Tarjeta de producto
â”‚   â”‚   â””â”€â”€ ImageGallery.jsx         # GalerÃ­a con lightbox
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â”œâ”€â”€ AuthContext.jsx          # Estado de autenticaciÃ³n
â”‚   â”‚   â”œâ”€â”€ CartContext.jsx          # Estado del carrito
â”‚   â”‚   â””â”€â”€ ToastContext.jsx         # Notificaciones emergentes
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ firebase.js              # ConfiguraciÃ³n Firebase
â”œâ”€â”€ .env.local                       # Variables de entorno (NO subir a Git)
â”œâ”€â”€ jsconfig.json                    # Alias de rutas (@/)
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ next.config.mjs
â”œâ”€â”€ firestore.rules                  # Reglas de seguridad Firestore
â””â”€â”€ storage.rules                    # Reglas de seguridad Storage
```

---

## ğŸš€ Correr en Local

```bash
npm install
npm run dev
```

Abrir: http://localhost:3000

---

## â˜ï¸ Deploy en Vercel

1. Subir el proyecto a GitHub
2. Conectar el repo en https://vercel.com
3. Agregar todas las variables de entorno en **Settings â†’ Environment Variables**
4. Cambiar `NEXT_PUBLIC_BASE_URL` al dominio real de Vercel
5. Configurar la URL del webhook en MercadoPago: `https://tu-dominio.vercel.app/api/webhook`

---

## ğŸ’³ Activar MercadoPago

1. Ir a https://www.mercadopago.com.ar/developers
2. Crear una aplicaciÃ³n
3. Copiar el **Access Token** de producciÃ³n
4. Pegarlo en `MP_ACCESS_TOKEN` del .env.local y en Vercel
5. Configurar el webhook en el panel de MP apuntando a `/api/webhook`

---

## ğŸ”’ Seguridad

- `.env.local` estÃ¡ en `.gitignore` â€” nunca se sube a GitHub
- Las reglas de Firestore limitan el acceso por usuario autenticado
- Solo el email admin puede escribir productos y leer todos los pedidos
- Las imÃ¡genes se suben directamente a Cloudinary con preset unsigned

---

## ğŸ“¦ Stack TecnolÃ³gico

| TecnologÃ­a | VersiÃ³n | Uso |
|---|---|---|
| Next.js | 14.2 | Framework principal |
| React | 18 | UI |
| Tailwind CSS | 3.4 | Estilos |
| Firebase | 10.x | Auth + Base de datos |
| Cloudinary | API REST | Almacenamiento de imÃ¡genes |
| MercadoPago SDK | 2.x | Pagos |
| Vercel | â€” | Hosting y deploy |